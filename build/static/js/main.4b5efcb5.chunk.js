(this.webpackJsonpcoco=this.webpackJsonpcoco||[]).push([[0],{23:function(e,t,a){e.exports=a.p+"static/media/logo.6279d13d.png"},41:function(e,t,a){e.exports=a(60)},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(14),c=a.n(o),i=a(17),l=a(19),s=a(34),u=a(5),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPLOAD_IMAGE":return Object(u.a)({},e,{active:!0});case"SAVE_CANVAS":return Object(u.a)({},e);default:return e}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RIGHT_CLICK":return Object(u.a)({},e,{contextMenuActive:!0});case"ZOOM_IN":console.log("zooming in");var a=e.zoomPercentage;return e.zoomPercentage<125&&(a+=25),console.log("new zoom: "+a),Object(u.a)({},e,{zoomPercentage:a});case"ZOOM_OUT":console.log("zooming out");var n=e.zoomPercentage;return e.zoomPercentage>25&&(n-=25),console.log("new zoom: "+n),Object(u.a)({},e,{zoomPercentage:n});case"MOUSE_DOWN":return alert("mouse down"),e;case"ADD_IMAGE_TO_BOARD":var r=e.images;return r[t.imageID]={image:t.image,layer:e.numLayers,height:500,width:500,positionX:0,positionY:0},Object(u.a)({},e,{images:r});case"DRAGGING_UPDATE":var o=e.images;return o[t.imageID]={positionX:t.newImageX,positionY:t.newImageY},Object(u.a)({},e,{translator:{dragging:!0,oldX:t.oldX,oldY:t.oldY},images:o});case"SET_DRAGGING":return e;case"MOUSE_UP":return Object(u.a)({},e,{translator:{dragging:!1,oldX:0,oldY:0}});default:return e}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLOSE_UPLOAD_MODAL":return Object(u.a)({},e,{active:!1});case"START_UPLOAD_MODAL":return Object(u.a)({},e,{active:!0});case"UPLOAD_UNSUCCESSFUL":return alert(t.errorMessage),e;default:return e}},f=Object(l.c)({toolbarReducer:d,boardReducer:p,uploadModalReducer:m}),g={boardReducer:{contextMenuActive:!1,zoomPercentage:50,images:{},numLayers:0,translator:{dragging:!1,oldX:0,oldY:0}},toolbarReducer:{},uploadModalReducer:{active:!1,handledSuccessfully:!1,imageID:null}};a(50);var h=a(8),b=a(9),v=a(11),y=a(10),O=(a(51),a(16)),E=(a(52),a(23)),j=a.n(E),w=a(18),D=a(40),M=(a(32),function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"Home"},r.a.createElement("header",{className:"Home-header"},r.a.createElement("img",{src:j.a,className:"Home-logo",alt:"logo"}),r.a.createElement("p",null,"Make collages. Online. With friends."),r.a.createElement(w.b,{to:"/board",className:"Home-link"},r.a.createElement(D.a,null,"Start making"))))}}]),a}(n.Component));a(54),a(55);function U(e){return e.preventDefault(),function(t){"z"!==e.key&&"\u03a9"!==e.key||!e.altKey||e.shiftKey?90===e.which&&e.altKey&&e.shiftKey?alert("pressed alt + shift + z"):"="!==e.key&&"\u2260"!==e.key||!e.altKey?"-"!==e.key&&"\u2013"!==e.key||!e.altKey||t(R()):t(_()):alert("pressed alt + z")}}function k(e,t){var a=t.images,n=parseInt(e.clientX),r=parseInt(e.clientY),o=null;for(var c in a){var i=[a[c]];if(n>i.positionX&&n<i.positionX+i.width&&r>i.positionY&&r<i.positionX+i.height){console.log("dragging image"),o=c;break}}if(o)return function(e){e(N(o,n,r))}}function A(e,t){var a=t.translator.dragging,n=parseInt(e.clientX),r=parseInt(e.clientY),o=n-t.translator.oldX,c=r-t.translator.oldY,i=t.images[a],l=i.positionX+o,s=i.positionY+c;return function(e){e(I(a,l,s,n,r))}}var N=function(e,t,a){return{type:"SET_DRAGGING",imageID:e,oldX:t,oldY:a}},I=function(e,t,a,n,r){return{type:"DRAGGING_UPDATE",imageID:e,newImageX:t,newImageY:a,oldX:n,oldY:r}},_=function(e){return{type:"ZOOM_IN"}},R=function(e){return{type:"ZOOM_OUT"}},C=function(e,t){return{type:"ADD_IMAGE_TO_BOARD",imageID:e,image:t}};var L=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).mouseDownHandler=function(t){t.preventDefault(),t.stopPropagation(),k(t,e.props.boardReducer)},e.mouseUpHandler=function(t){t.preventDefault(),t.stopPropagation(),e.props.mouseUp()},e.mouseMoveHandler=function(t){e.props.boardReducer.translator.dragging&&(console.log("mouse x: "+t.clientX+", mouse y: "+t.clientY),t.preventDefault(),t.stopPropagation(),A(t,e.props.boardReducer))},e.rightClick=function(t){t.preventDefault(),e.props.rightClick()},e.keyBindHandler=function(t){e.props.dispatch(U(t))},e}return Object(b.a)(a,[{key:"drawLayers",value:function(e){for(var t=this,a=[],n=0;n<=e;n++){var o="layer_"+n;a.push(r.a.createElement("canvas",{key:o,ref:o,className:"layer",onMouseDown:this.mouseDownHandler,onMouseMove:this.mouseMoveHandler,onMouseUp:this.mouseUpHandler,onKeyDown:this.keyBindHandler,tabIndex:"0"}))}var c=function(){var e=t.refs["layer_"+t.props.boardReducer.images[i].layer],a=t.props.boardReducer.images[i].height,n=t.props.boardReducer.images[i].width,r=t.props.boardReducer.images[i].positionX,o=t.props.boardReducer.images[i].positionY,c=e.getContext("2d"),l=new Image;l.ref=i,l.src=t.props.boardReducer.images[i].image,l.onload=function(){c.drawImage(l,r,o,n,a)}};for(var i in this.props.boardReducer.images)c();return a}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{ref:"board",className:(e=this.props.boardReducer.zoomPercentage,125===e?"myBoard125":100===e?"myBoard100":75===e?"myBoard75":50===e?"myBoard50":25===e?"myBoard25":"myBoard50"),onContextMenu:this.rightClick,onKeyDown:this.keyBindHandler,tabIndex:"0"},this.drawLayers(this.props.boardReducer.numLayers)));var e}}]),a}(n.Component),P=Object(i.b)((function(e){return Object(u.a)({},e)}),(function(e){return{rightClick:function(){return e({type:"RIGHT_CLICK"})},mouseUp:function(){return e({type:"MOUSE_UP"})},dispatch:e}}))(L),z=(a(56),a(38)),S=a(24),X=a(39),Y=a(29),G=a.n(Y),B=a(37),H=a(63);function x(e){switch(function(e){var t=e.split(".");return t[t.length-1]}(e).toLowerCase()){case"jpg":case"jpeg":case"gif":case"bmp":case"png":case"heic":return!0;default:return!1}}function T(e){return new Promise((function(t){t(URL.createObjectURL(e))}))}function K(e){return e.preventDefault(),function(){var t=Object(B.a)(G.a.mark((function t(a){var n,r;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!x(e.target.files[0].name)){t.next=8;break}return o=e.target.files[0],n=Object(H.a)(o.name+Date.now(),"bcc39d63-f630-43bc-becc-fa6821762aeb"),t.next=4,T(e.target.files[0]);case 4:r=t.sent,a(C(n,r)),t.next=9;break;case 8:a(W("."+e.target.files[0].type+" files are not currently supported."));case 9:case"end":return t.stop()}var o}),t)})));return function(e){return t.apply(this,arguments)}}()}var W=function(e){return{type:"UPLOAD_UNSUCCESSFUL",errorMessage:e}},Z=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).startUploadModal=function(t){e.props.startUploadModal(t)},e}return Object(b.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"toolbar"},r.a.createElement("span",{className:"item",onClick:this.startUploadModal},r.a.createElement(S.a,{size:18})),r.a.createElement("span",{className:"item"},r.a.createElement(z.a,{size:18})),r.a.createElement("span",{className:"item"},r.a.createElement(X.a,{size:18})))}}]),a}(n.Component),F=Object(i.b)((function(e){return Object(u.a)({},e)}),(function(e){return{startUploadModal:function(t){return e({type:"START_UPLOAD_MODAL"})}}}))(Z),V=(a(58),function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"footer"},r.a.createElement(w.b,{to:"/"},r.a.createElement("img",{src:j.a,className:"logo",alt:"logo",href:"/"})),r.a.createElement("p",{className:"slogan"}," "," Make collages. With Friends. In your browser.")))}}]),a}(n.Component)),J=(a(59),a(21)),$=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).closeUploadModal=function(t){e.props.closeUploadModal(t)},e.handleFile=function(t){e.props.dispatch(K(t))},e}return Object(b.a)(a,[{key:"render",value:function(){return r.a.createElement(J.a,{show:this.props.uploadModalReducer.active,className:"uploadModal"},r.a.createElement(J.a.Header,{closeButton:!0,onClick:this.closeUploadModal},r.a.createElement(J.a.Title,null,"Upload images")),r.a.createElement(J.a.Body,{className:"mainBody"},r.a.createElement("p",null,"Drag and drop an image, or click to upload."),r.a.createElement("label",{htmlFor:"dragZone"},r.a.createElement("div",{className:"dragZone"},r.a.createElement(S.a,{size:32,className:"icon"}))),r.a.createElement("input",{type:"file",onChange:this.handleFile,id:"dragZone"})))}}]),a}(n.Component),q=Object(i.b)((function(e){return Object(u.a)({},e)}),(function(e){return{closeUploadModal:function(t){return e({type:"CLOSE_UPLOAD_MODAL"})},dispatch:e}}))($),Q=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).componentDidUpdate=function(){window.onbeforeunload=function(){return!0}},e}return Object(b.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"pageContainer"},r.a.createElement(O.a,{when:!0,message:"You have unsaved changes to your board, are you sure you want to leave?"}),r.a.createElement(q,null),r.a.createElement("div",{className:"titleWrapper"},r.a.createElement("input",{className:"title",type:"string",defaultValue:"my board"})),r.a.createElement("div",{className:"boardWrapper"},r.a.createElement(P,null)),r.a.createElement("div",{className:"toolbarWrapper"},r.a.createElement(F,null)),r.a.createElement("div",{className:"footerWrapper"},r.a.createElement(V,null)))}}]),a}(n.Component),ee=function(){return r.a.createElement(O.d,null,r.a.createElement(O.b,{exact:!0,path:"/",component:M}),r.a.createElement(O.b,{exact:!0,path:"/board",component:Q}))},te=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(ee,null))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(i.a,{store:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;return Object(l.d)(f,e,Object(l.a)(s.a))}()},r.a.createElement(w.a,null,r.a.createElement(te,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.4b5efcb5.chunk.js.map